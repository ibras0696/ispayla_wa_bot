# Журнал изменений

## 2025-12-13
- Команда открытия меню переведена на текст «меню», кнопки «⬅️ В меню» появляются после профиля и других экранов, инструкции в README обновлены.
- Карточки собственных и публичных объявлений отправляют все прикреплённые фото, а выбор по номеру каталога стал устойчивее (перестраивается кэш, если данные устарели).
- Обновлены тексты форм и подсказок: теперь вместо «0» используется «меню», чтобы избежать путаницы с номерами объявлений.

## 2025-12-12
- Доработан раздел «Покупка»: добавлены фильтры по региону и состоянию, сортировки по цене/дате и подсказки в UI.
- Исправлена отправка навигационных кнопок после изменения фильтров, стейты теперь сохраняются с новыми полями.
- CRUD фильтра объявлений поддерживает поиск по региону/состоянию и произвольную сортировку.
- Обновлены тексты меню и чек-лист, добавлены unit-тесты для новых фильтров.

## 2025-12-11
- Добавлена подстраховка `Settings.base_url`: берётся `GREEN_API_BASE_URL` или `DOMAIN`, иначе дефолт Green API.
- Добавлена валидация пробега: предел `2_147_483_647` км, чтобы не ловить int32 overflow в Postgres.
- В `CrudeAdd` заготовлены вспомогательные методы (подсчёт активных, поиск по названию, получение объявления по ID) — пока не подключены к хендлерам.
- Поправлены описательные docstring в `bot/runner.py` и `bot/handlers/basic.py` для облегчения чтения.
- Покупка: кнопка «Все объявления» теперь показывает общее количество и последние 5, можно открыть по ID или номеру; добавлен поиск по названию (кнопка «Поиск авто»), выводит до 5 совпадений и даёт открыть карточку.
- Покупка: добавлены фильтры (цена/год/пробег/марка), пагинация, кэш списка; кнопка «Избранное», добавление в избранное из карточки; в CRUD добавлены подсчёт и выборка по фильтрам с пагинацией, get_by_ids.
